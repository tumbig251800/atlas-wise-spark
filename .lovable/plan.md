

# ‡πÅ‡∏ú‡∏ô‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á: REF ID ‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏î‡πâ + ‡∏Å‡∏é‡πÄ‡∏ß‡∏•‡∏≤‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°

## ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç (2 ‡πÑ‡∏ü‡∏•‡πå)

### 1. `src/components/AppLayout.tsx` ‚Äî ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô REF ID ‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà-‡∏ß‡∏¥‡∏ä‡∏≤-‡∏´‡πâ‡∏≠‡∏á

**‡∏à‡∏≤‡∏Å:**
```
[REF-1] ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà: 2026-02-19 | ‡∏ß‡∏¥‡∏ä‡∏≤: ‡∏®‡∏¥‡∏•‡∏õ‡∏∞ | ...
```

**‡πÄ‡∏õ‡πá‡∏ô:**
```
[REF-19‡∏Å.‡∏û.-‡∏®‡∏¥‡∏•‡∏õ‡∏∞-‡∏õ.2/1] ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà: 2026-02-19 | ‡∏ß‡∏¥‡∏ä‡∏≤: ‡∏®‡∏¥‡∏•‡∏õ‡∏∞ | ...
```

‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏ó‡∏≤‡∏á‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ:
- ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô `toThaiShortDate(dateStr)` ‡∏ó‡∏µ‡πà‡πÅ‡∏õ‡∏•‡∏á `"2026-02-19"` ‚Üí `"19‡∏Å.‡∏û."` ‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ array ‡∏Ç‡∏≠‡∏á‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡πÑ‡∏ó‡∏¢‡∏¢‡πà‡∏≠ (`["‡∏°.‡∏Ñ.","‡∏Å.‡∏û.","‡∏°‡∏µ.‡∏Ñ.",...,"‡∏ò.‡∏Ñ."]`)
- ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô `[REF-${i + 1}]` ‡πÄ‡∏õ‡πá‡∏ô `[REF-${shortDate}-${subject}-${gradeLevel}/${classroom}]`
- ‡πÉ‡∏ä‡πâ string literal ‡∏•‡πâ‡∏ß‡∏ô ‡πÑ‡∏°‡πà‡∏°‡∏µ encoding issue ‡πÄ‡∏û‡∏£‡∏≤‡∏∞ JavaScript/TypeScript ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö UTF-8 ‡πÄ‡∏ï‡πá‡∏°‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö ‡∏ó‡∏±‡πâ‡∏á frontend ‡πÅ‡∏•‡∏∞ Edge Function ‡∏£‡∏±‡∏ö JSON body ‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô UTF-8 ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß

‡∏Ç‡πâ‡∏≠‡∏™‡∏±‡∏á‡πÄ‡∏Å‡∏ï‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á Encoding ‡∏ó‡∏µ‡πà‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÅ‡∏à‡πâ‡∏á:
- **‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤** ‚Äî context ‡∏ñ‡∏π‡∏Å‡∏™‡πà‡∏á‡πÄ‡∏õ‡πá‡∏ô JSON string ‡πÉ‡∏ô HTTP POST body ‡∏ã‡∏∂‡πà‡∏á‡πÄ‡∏õ‡πá‡∏ô UTF-8 ‡∏ó‡∏±‡πâ‡∏á fetch API ‡πÅ‡∏•‡∏∞ Edge Function (`req.json()`) ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô URL encoding ‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏û‡∏µ‡πâ‡∏¢‡∏ô

### 2. `supabase/functions/ai-chat/index.ts` ‚Äî ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏é‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡πÉ‡∏ô‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°

‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πà‡∏≠‡∏à‡∏≤‡∏Å‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 116 (‡∏´‡∏•‡∏±‡∏á‡∏ö‡∏•‡πá‡∏≠‡∏Å "üí° ‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç"):

```
‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏° ‡πÉ‡∏´‡πâ‡∏à‡∏±‡∏î‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏î‡∏±‡∏á‡∏ô‡∏µ‡πâ:
- ‚ö° ‡∏ó‡∏≥‡πÑ‡∏î‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ (‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡πÄ‡∏û‡∏¥‡πà‡∏°, ‡πÉ‡∏ä‡πâ‡πÄ‡∏ß‡∏•‡∏≤ ‚â§10 ‡∏ô‡∏≤‡∏ó‡∏µ)
- üïê ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏•‡πà‡∏ß‡∏á‡∏´‡∏ô‡πâ‡∏≤ (‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå/‡∏™‡∏∑‡πà‡∏≠, ‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏ß‡∏•‡∏≤‡πÇ‡∏î‡∏¢‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì)
```

### ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏ö‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠

REF ID ‡∏ó‡∏µ‡πà‡∏¢‡∏≤‡∏ß‡∏Ç‡∏∂‡πâ‡∏ô‡∏à‡∏∞ **‡πÑ‡∏°‡πà‡∏Å‡∏£‡∏∞‡∏ó‡∏ö UI** ‡πÄ‡∏û‡∏£‡∏≤‡∏∞:
- REF ID ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô context ‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡πÉ‡∏´‡πâ AI ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÅ‡∏™‡∏î‡∏á‡∏ö‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á
- AI ‡∏à‡∏∞‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á REF ID ‡πÉ‡∏ô‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö ‡∏ã‡∏∂‡πà‡∏á‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡πÄ‡∏õ‡πá‡∏ô Markdown ‡πÉ‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏ä‡∏ó‡∏ó‡∏µ‡πà‡∏°‡∏µ word-wrap ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß
- ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏ô‡πâ‡∏≤ Consultant ‡πÅ‡∏•‡∏∞ ChatSidebar ‡πÉ‡∏ä‡πâ `ReactMarkdown` ‡∏ó‡∏µ‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö text wrap ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥

---

## ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏ó‡∏µ‡πà‡∏Ñ‡∏≤‡∏î‡∏´‡∏ß‡∏±‡∏á

- ‡∏Ñ‡∏£‡∏π‡πÄ‡∏´‡πá‡∏ô `[REF-19‡∏Å.‡∏û.-‡∏®‡∏¥‡∏•‡∏õ‡∏∞-‡∏õ.2/1]` ‡πÉ‡∏ô‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö AI ‚Üí ‡∏£‡∏π‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡∏ß‡πà‡∏≤‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á‡∏à‡∏≤‡∏Å‡∏Ñ‡∏≤‡∏ö‡πÑ‡∏´‡∏ô
- ‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏ó‡∏µ‡πà‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏à‡∏∞‡∏°‡∏µ‡∏´‡∏°‡∏ß‡∏î ‚ö° (‡∏ó‡∏≥‡∏ó‡∏±‡∏ô‡∏ó‡∏µ) / üïê (‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏•‡πà‡∏ß‡∏á‡∏´‡∏ô‡πâ‡∏≤) ‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏π‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡πÑ‡∏î‡πâ‡∏á‡πà‡∏≤‡∏¢‡∏Ç‡∏∂‡πâ‡∏ô
- ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤ encoding ‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢

