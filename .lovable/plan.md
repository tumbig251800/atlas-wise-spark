

## วิเคราะห์ไฟล์ CSV ที่อัปโหลด

ไฟล์นี้เป็น **Google Forms CSV** มี 17 แถวข้อมูล (ป.4/ห้อง2, วิชาภาษาไทย, ครูวรกานต์) ช่วง 15 ธ.ค. 2025 – 9 ก.พ. 2026

### ใช้เทสได้ ไฟล์นี้เหมาะสำหรับทดสอบ Strike Escalation

**เหตุผล:**
- Header column 17 เขียนว่า `รายชื่อนักเรียนที่ต้อง "ซ่อมเสริม"` ตรงกับ keyword ใหม่ที่แก้ไปแล้วใน Phase 1
- มีแถวที่มี remedial_ids จริง เช่น `9305, 9049, 9064, 9068, 9163, 9245, 9386` (7 คนจาก 17 = **41% > 40%**)
- มีทั้ง P-Gap, K-Gap, System-Gap, Success ครบสำหรับทดสอบ

### สถานการณ์ Strike ที่คาดว่าจะเกิด

| แถว | วันที่ | หัวข้อ | Gap | Remedial | gap_rate | คาดการณ์ |
|-----|--------|--------|-----|----------|----------|----------|
| 1 | 15/12 | การอ่านจับใจความ | P-Gap | 7 คน | 41% | **Strike 1 (Plan Fail)** |
| 2 | 16/12 | การอ่านจับใจความ | Success | 0 | 0% | Reset → 0 |
| 5 | 22/12 | การอ่านเสียงบทร้อยแก้ว | K-Gap | 0 | 0% | Reset |

เนื่องจากหัวข้อเปลี่ยนและ gap_rate ไม่ได้ > 40% ติดต่อกัน 2 ครั้งในหัวข้อเดียวกัน จึง**ไม่น่าจะเกิด Force Pivot** จากไฟล์นี้ แต่จะเห็น **Plan Fail (Strike 1)** อย่างน้อย 1 ครั้ง

### วิธีเทส (ขั้นตอน)

1. **ลบข้อมูลเก่าออกก่อน** (ถ้ายังมี 31 logs เดิม) เพื่อให้เห็นผลชัดเจน
2. **อัปโหลด CSV นี้** ผ่านหน้า `/upload-csv` — เลือกเทอมที่ต้องการ
3. **ตรวจสอบหน้า Executive Dashboard:**
   - Strike Escalation ควรมี 1+ รายการ Active (Plan Fail)
   - Tab "Pivot" ควรว่าง (ไม่มี Force Pivot)
   - Gap Pie Chart ควรแสดง P-Gap, K-Gap, System-Gap
4. **ถ้าต้องการทดสอบ Force Pivot:** ต้องแก้ไข CSV ให้มี 2 แถวที่หัวข้อเดียวกัน + gap_rate > 40% ติดต่อกัน (ไม่มี Success คั่น)

### ข้อจำกัดที่ต้องระวัง

- บางแถวมี remedial_ids เป็นตัวเลขที่ Google Sheets จัดรูปแบบผิด เช่น `"90,499,064,916,393,000,000"` (แถว 23/1) ซึ่งไม่ใช่ student IDs จริง — ระบบจะนับเป็น string เดียวทำให้ gap_rate ผิดพลาดในแถวนั้น
- ไฟล์มี column "ประทับเวลา" และ "รหัสครู" เพิ่มมา แต่ parser จะจัดการได้เพราะใช้ header matching ไม่ใช่ตำแหน่ง

### สรุป

ไฟล์นี้ใช้เทสได้เลย ถ้าต้องการ ให้อัปโหลดผ่านหน้า Upload CSV แล้วไปดูผลที่ Executive Dashboard

